(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let s=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},14764,e=>{"use strict";let s=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>s],14764)},62031,e=>{"use strict";let s=(0,e.i(75254).default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);e.s(["Share2",()=>s],62031)},45830,e=>{"use strict";var s=e.i(43476),a=e.i(71645);e.i(50711);var t=e.i(82045),l=e.i(83394),r=e.i(30374),i=e.i(67881),n=e.i(23750),c=e.i(62870),o=e.i(25959),d=e.i(62031),h=e.i(86311);function m({open:e,onOpenChange:m,userId:x}){let[u,p]=(0,a.useState)(""),[g,j]=(0,a.useState)("4"),[f,y]=(0,a.useState)("professional"),[v,N]=(0,a.useState)(!1),[w,b]=(0,a.useState)(!1),[S,k]=(0,a.useState)(null),C=(0,t.useMutation)(l.api.aiSharing.shareConversation),I=(0,t.useQuery)(l.api.aiSharing.getShareablePreview,e?{userId:x,messageCount:parseInt(g)}:"skip"),A=async()=>{if(u.length<10||u.length>200)return void k("Title must be 10-200 characters");k(null),b(!0);try{(await C({userId:x,title:u.trim(),messageCount:parseInt(g),lifeDimension:f,isAnonymous:v})).success&&(p(""),j("4"),y("professional"),N(!1),m(!1))}catch(e){console.error("Share error:",e),k(e.message||"Failed to share conversation")}finally{b(!1)}};return(0,s.jsx)(r.Dialog,{open:e,onOpenChange:m,children:(0,s.jsxs)(r.DialogContent,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(r.DialogHeader,{children:[(0,s.jsxs)(r.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Share2,{className:"w-5 h-5 text-purple-600"}),"Share AI Conversation"]}),(0,s.jsx)(r.DialogDescription,{children:"Share your AI assistant conversation with the community"})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Title * (10-200 characters)"}),(0,s.jsx)(n.Input,{placeholder:"e.g., 'Career advice for switching to tech'",value:u,onChange:e=>p(e.target.value),maxLength:200}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[u.length,"/200 characters"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Number of Messages to Share"}),(0,s.jsxs)(c.Select,{value:g,onValueChange:j,children:[(0,s.jsx)(c.SelectTrigger,{children:(0,s.jsx)(c.SelectValue,{placeholder:"Select message count"})}),(0,s.jsxs)(c.SelectContent,{children:[(0,s.jsx)(c.SelectItem,{value:"2",children:"Last 2 messages"}),(0,s.jsx)(c.SelectItem,{value:"4",children:"Last 4 messages"}),(0,s.jsx)(c.SelectItem,{value:"6",children:"Last 6 messages"}),(0,s.jsx)(c.SelectItem,{value:"8",children:"Last 8 messages"}),(0,s.jsx)(c.SelectItem,{value:"10",children:"Last 10 messages"})]})]})]}),I&&I.length>0&&(0,s.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50 max-h-60 overflow-y-auto",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-2",children:"Preview:"}),(0,s.jsx)("div",{className:"space-y-2",children:I.map((e,a)=>(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsxs)("span",{className:"font-semibold",children:["user"===e.role?"You":"Aurora AI",":"]})," ",(0,s.jsxs)("span",{className:"text-gray-700",children:[e.content.substring(0,100),e.content.length>100?"...":""]})]},a))})]}),I&&0===I.length&&(0,s.jsxs)("div",{className:"border rounded-lg p-4 bg-yellow-50 text-yellow-800 text-sm",children:[(0,s.jsx)(h.MessageSquare,{className:"w-4 h-4 inline mr-2"}),"You need to have a conversation with the AI assistant first before sharing."]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Category *"}),(0,s.jsxs)(c.Select,{value:f,onValueChange:y,children:[(0,s.jsx)(c.SelectTrigger,{children:(0,s.jsx)(c.SelectValue,{placeholder:"Select a category"})}),(0,s.jsxs)(c.SelectContent,{children:[(0,s.jsx)(c.SelectItem,{value:"professional",children:"Professional"}),(0,s.jsx)(c.SelectItem,{value:"social",children:"Social"}),(0,s.jsx)(c.SelectItem,{value:"daily",children:"Daily Life"}),(0,s.jsx)(c.SelectItem,{value:"travel",children:"Travel"}),(0,s.jsx)(c.SelectItem,{value:"financial",children:"Financial"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(o.Checkbox,{id:"anonymous",checked:v,onCheckedChange:e=>N(e)}),(0,s.jsx)("label",{htmlFor:"anonymous",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Share anonymously"})]}),S&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600",children:S})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>m(!1),disabled:w,children:"Cancel"}),(0,s.jsx)(i.Button,{onClick:A,disabled:w||u.length<10||!I||0===I.length,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:w?"Sharing...":"Share Conversation"})]})]})})}var x=e.i(84762),u=e.i(63270),p=e.i(14764),g=e.i(83086),j=e.i(31278);function f(){let[e,r]=(0,a.useState)(null),[n,c]=(0,a.useState)(""),[o,h]=(0,a.useState)(!1),[f,y]=(0,a.useState)(!1),v=(0,a.useRef)(null),N=(0,t.useAction)(l.api.ai.chat);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me"),s=await e.json();s.userId&&r(s.userId)}catch(e){console.error("Error getting user:",e)}})()},[]);let w=(0,t.useQuery)(l.api.ai.getHistory,e?{userId:e,limit:50}:"skip"),b=(0,t.useQuery)(l.api.users.getUser,e?{userId:e}:"skip");(0,a.useEffect)(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[w]);let S=async()=>{if(n.trim()&&e&&!o){c(""),h(!0);try{await N({userId:e,message:n})}catch(e){console.error("Chat error:",e),alert("Failed to send message. Please try again.")}finally{h(!1)}}};return(0,s.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b",children:(0,s.jsx)("div",{className:"px-4 sm:px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,s.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(g.Sparkles,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"AI Assistant"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:"Get personalized career advice"})]})]}),w&&w.length>=2&&(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>y(!0),className:"flex-shrink-0",children:[(0,s.jsx)(d.Share2,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Share"})]})]})})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-4 sm:py-6",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto space-y-4 sm:space-y-6",children:[(!w||0===w.length)&&(0,s.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(g.Sparkles,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-semibold mb-2",children:["Hi ",b?.name&&"null"!==b.name?b.name.split(" ")[0]:"there","! ðŸ‘‹"]}),(0,s.jsx)("p",{className:"text-gray-700 mb-4",children:"I'm Aurora, your AI assistant. I'm here to help you with:"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-gray-600",children:[(0,s.jsx)("li",{children:"â€¢ Career advice and job search strategies"}),(0,s.jsx)("li",{children:"â€¢ Safety recommendations for workplaces and locations"}),(0,s.jsx)("li",{children:"â€¢ Navigating opportunities on the platform"}),(0,s.jsx)("li",{children:"â€¢ Tips on earning more credits"}),(0,s.jsx)("li",{children:"â€¢ Any questions about your career journey"})]}),(0,s.jsx)("p",{className:"text-gray-700 mt-4",children:"What would you like to know?"})]})]})}),w?.map((e,a)=>(0,s.jsxs)("div",{className:`flex items-start gap-2 sm:gap-4 ${"user"===e.role?"flex-row-reverse":""}`,children:["assistant"===e.role?(0,s.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(g.Sparkles,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white"})}):(0,s.jsx)(u.Avatar,{className:"flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10",children:(0,s.jsx)(u.AvatarFallback,{className:"text-xs sm:text-sm",children:b?.name?.charAt(0).toUpperCase()||"U"})}),(0,s.jsx)("div",{className:`rounded-lg p-3 sm:p-4 max-w-[85%] sm:max-w-[80%] ${"user"===e.role?"bg-purple-600 text-white":"bg-white shadow-sm"}`,children:(0,s.jsx)("p",{className:"whitespace-pre-wrap text-sm sm:text-base",children:e.content})})]},a)),o&&(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(g.Sparkles,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.Loader2,{className:"w-4 h-4 animate-spin"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Aurora is thinking..."})]})})]}),(0,s.jsx)("div",{ref:v})]})}),(0,s.jsx)("div",{className:"bg-white border-t p-4",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(x.Textarea,{value:n,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),S())},placeholder:"Ask me anything about your career, safety, or opportunities...",className:"flex-1 min-h-[60px] max-h-[200px]",disabled:o}),(0,s.jsx)(i.Button,{onClick:S,disabled:!n.trim()||o,size:"lg",className:"px-6",children:o?(0,s.jsx)(j.Loader2,{className:"w-5 h-5 animate-spin"}):(0,s.jsx)(p.Send,{className:"w-5 h-5"})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Press Enter to send, Shift+Enter for new line"})]})}),e&&(0,s.jsx)(m,{open:f,onOpenChange:y,userId:e})]})}e.s(["default",()=>f],45830)}]);