(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},61911,e=>{"use strict";let t=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],61911)},9835,e=>{"use strict";let t="offline-routes";function s(e,t,s,a){let i=e*Math.PI/180,r=s*Math.PI/180,l=(s-e)*Math.PI/180,n=(a-t)*Math.PI/180,o=Math.sin(l/2)*Math.sin(l/2)+Math.cos(i)*Math.cos(r)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371e3}async function a(e,s){let a=await new Promise((e,s)=>{let a=indexedDB.open("aurora-routes",1);a.onerror=()=>s(a.error),a.onsuccess=()=>e(a.result),a.onupgradeneeded=e=>{let s=e.target.result;s.objectStoreNames.contains(t)||s.createObjectStore(t,{keyPath:"id",autoIncrement:!0})}}),i=a.transaction([t],"readwrite").objectStore(t);await new Promise((t,a)=>{let r=i.put({routeId:e,coordinates:s,timestamp:Date.now()});r.onsuccess=()=>t(),r.onerror=()=>a(r.error)}),a.close()}class i{watchId=null;state={isTracking:!1,isPaused:!1,coordinates:[],stats:{distance:0,duration:0,pace:0,elevationGain:0},startTime:null,pausedTime:0};lastSampleTime=0;lastSamplePosition=null;onUpdate=null;onError=null;start(e,t){this.state.isTracking||(this.onUpdate=e,this.onError=t||null,this.state.isTracking=!0,this.state.isPaused=!1,this.state.startTime=Date.now(),this.lastSampleTime=Date.now(),"geolocation"in navigator?this.watchId=navigator.geolocation.watchPosition(e=>this.handlePosition(e),e=>this.handleError(e),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):this.handleError({code:0,message:"Geolocation not supported"}))}pause(){this.state.isTracking&&!this.state.isPaused&&(this.state.isPaused=!0,this.notifyUpdate())}resume(){this.state.isTracking&&this.state.isPaused&&(this.state.isPaused=!1,this.state.pausedTime+=Date.now()-(this.lastSampleTime||Date.now()),this.lastSampleTime=Date.now(),this.notifyUpdate())}stop(){return null!==this.watchId&&(navigator.geolocation.clearWatch(this.watchId),this.watchId=null),this.state.isTracking=!1,this.state.isPaused=!1,this.state.startTime&&(this.state.stats.duration=Math.floor((Date.now()-this.state.startTime-this.state.pausedTime)/1e3)),{...this.state}}getState(){return{...this.state}}handlePosition(e){if(!this.state.isTracking||this.state.isPaused)return;let t={lat:e.coords.latitude,lng:e.coords.longitude,timestamp:e.timestamp,elevation:e.coords.altitude||void 0};this.shouldSample(t)&&(this.state.coordinates.push(t),this.lastSamplePosition=t,this.lastSampleTime=Date.now(),this.updateStats(),this.notifyUpdate(),this.state.coordinates.length%10==0&&this.saveToOfflineStorage())}shouldSample(e){return!!(!this.lastSamplePosition||Date.now()-this.lastSampleTime>=5e3||s(this.lastSamplePosition.lat,this.lastSamplePosition.lng,e.lat,e.lng)>=10)}updateStats(){this.state.stats.distance=function(e){if(e.length<2)return 0;let t=0;for(let a=1;a<e.length;a++)t+=s(e[a-1].lat,e[a-1].lng,e[a].lat,e[a].lng);return t}(this.state.coordinates),this.state.stats.elevationGain=function(e){if(e.length<2)return 0;let t=0;for(let s=1;s<e.length;s++){let a=e[s-1].elevation||0,i=e[s].elevation||0;i>a&&(t+=i-a)}return t}(this.state.coordinates),this.state.startTime&&(this.state.stats.duration=Math.floor((Date.now()-this.state.startTime-this.state.pausedTime)/1e3)),this.state.stats.distance>0&&this.state.stats.duration>0&&(this.state.stats.pace=this.state.stats.duration/60/(this.state.stats.distance/1e3))}handleError(e){console.error("GPS Error:",e),this.onError&&this.onError(e)}notifyUpdate(){this.onUpdate&&this.onUpdate({...this.state})}async saveToOfflineStorage(){try{await a("current",this.state.coordinates)}catch(e){console.error("Failed to save offline route:",e)}}}function r(e){let t=Math.floor(e/3600),s=Math.floor(e%3600/60),a=e%60;return t>0?`${t}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${s}:${a.toString().padStart(2,"0")}`}function l(e){return e>=1e3?`${(e/1e3).toFixed(2)} km`:`${Math.round(e)} m`}function n(e){if(!isFinite(e)||0===e)return"--:--";let t=Math.floor(e),s=Math.round((e-t)*60);return`${t}:${s.toString().padStart(2,"0")}`}e.s(["GPSTracker",()=>i,"formatDistance",()=>l,"formatDuration",()=>r,"formatPace",()=>n])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},87130,e=>{"use strict";let t=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],87130)},52529,e=>{"use strict";var t=e.i(43476),s=e.i(932),a=e.i(71645);e.i(50711);var i=e.i(82045),r=e.i(83394),l=e.i(67881),n=e.i(70065),o=e.i(23750),c=e.i(55436),d=e.i(87130),m=e.i(46897),h=e.i(70273),u=e.i(25652),p=e.i(61911),x=e.i(71689),g=e.i(18566),f=e.i(9835);function y(){let e,y,v,N,S,w,k,T,P,M,_,C,D,U,$,A,I,L,E,B,F=(0,s.c)(120),[,z]=(0,a.useState)(null),[R,G]=(0,a.useState)(""),[q,O]=(0,a.useState)("all"),[H,K]=(0,a.useState)(0);F[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],F[0]=e):e=F[0];let[Q,W]=(0,a.useState)(e),[J,V]=(0,a.useState)("grid"),X=(0,g.useRouter)();F[1]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{(async()=>{try{let e=await fetch("/api/auth/me"),t=await e.json();t.userId&&z(t.userId)}catch(e){console.error("Error getting user:",e)}})()},v=[],F[1]=y,F[2]=v):(y=F[1],v=F[2]),(0,a.useEffect)(y,v);let Y="all"!==q?q:void 0,Z=H>0?H:void 0;F[3]!==Y||F[4]!==Z?(N={limit:50,routeType:Y,minRating:Z},F[3]=Y,F[4]=Z,F[5]=N):N=F[5];let ee=(0,i.useQuery)(r.api.routes.getPublicRoutes,N);if(F[6]!==q||F[7]!==H||F[8]!==X||F[9]!==ee||F[10]!==R||F[11]!==Q||F[12]!==J){let e,s,a,i,r,g,y,v,N,A,I,L,E,B,z,Y,Z,et,es=ee?.filter(e=>{if(R){let t=R.toLowerCase(),s=e.title.toLowerCase().includes(t),a=e.tags.some(e=>e.toLowerCase().includes(t)),i=e.startLocation.name.toLowerCase().includes(t)||e.endLocation.name.toLowerCase().includes(t);if(!s&&!a&&!i)return!1}return(!(Q.length>0)||!!Q.every(t=>e.tags.includes(t)))&&!0})||[];if(F[24]!==q||F[25]!==H||F[26]!==X||F[27]!==ee||F[28]!==R||F[29]!==Q){let m,h,u,p,f,j,S,k,C,D,U,$,I=Array.from(new Set(ee?.flatMap(b)||[]));M="min-h-screen bg-gray-50",F[45]!==X?(m=()=>X.push("/routes"),F[45]=X,F[46]=m):m=F[46],F[47]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)(x.ArrowLeft,{className:"w-4 h-4 mr-2"}),F[47]=h):h=F[47],F[48]!==m?(u=(0,t.jsx)("div",{className:"flex items-center gap-3 mb-4",children:(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",onClick:m,className:"text-white hover:bg-white/20",children:[h,"Back"]})}),F[48]=m,F[49]=u):u=F[49],F[50]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Discover Routes"}),f=(0,t.jsx)("p",{className:"text-sm sm:text-base text-blue-100",children:"Find safe and inspiring routes shared by the community"}),F[50]=p,F[51]=f):(p=F[50],f=F[51]),F[52]!==u?(_=(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8",children:[u,p,f]})}),F[52]=u,F[53]=_):_=F[53],P="container mx-auto px-4 sm:px-6 py-6 sm:py-8",T="max-w-7xl mx-auto",w="grid grid-cols-1 lg:grid-cols-4 gap-6",A="lg:col-span-1",s=n.Card,N="sticky top-24",e=n.CardContent,a="p-4 space-y-4",F[54]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("div",{children:(0,t.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,t.jsx)(d.Filter,{className:"w-4 h-4"}),"Filters"]})}),j=(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),F[54]=i,F[55]=j):(i=F[54],j=F[55]),F[56]===Symbol.for("react.memo_cache_sentinel")?(S=(0,t.jsx)(c.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),F[56]=S):S=F[56],F[57]===Symbol.for("react.memo_cache_sentinel")?(k=e=>G(e.target.value),F[57]=k):k=F[57],F[58]!==R?(r=(0,t.jsxs)("div",{children:[j,(0,t.jsxs)("div",{className:"relative",children:[S,(0,t.jsx)(o.Input,{placeholder:"Search routes...",value:R,onChange:k,className:"pl-9"})]})]}),F[58]=R,F[59]=r):r=F[59],F[60]===Symbol.for("react.memo_cache_sentinel")?(C=(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Activity Type"}),F[60]=C):C=F[60],F[61]===Symbol.for("react.memo_cache_sentinel")?(D=["all","walking","running","cycling","commuting"],F[61]=D):D=F[61],F[62]!==q?(g=(0,t.jsxs)("div",{children:[C,(0,t.jsx)("div",{className:"space-y-2",children:D.map(e=>(0,t.jsx)("button",{onClick:()=>O(e),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors capitalize ${q===e?"bg-purple-100 text-purple-700 font-medium":"hover:bg-gray-100"}`,children:e},e))})]}),F[62]=q,F[63]=g):g=F[63],F[64]===Symbol.for("react.memo_cache_sentinel")?(U=(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Minimum Rating"}),F[64]=U):U=F[64],F[65]===Symbol.for("react.memo_cache_sentinel")?($=[0,3,4,5],F[65]=$):$=F[65],F[66]!==H?(y=(0,t.jsxs)("div",{children:[U,(0,t.jsx)("div",{className:"space-y-2",children:$.map(e=>(0,t.jsx)("button",{onClick:()=>K(e),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ${H===e?"bg-purple-100 text-purple-700 font-medium":"hover:bg-gray-100"}`,children:0===e?"Any":`${e}+ stars`},e))})]}),F[66]=H,F[67]=y):y=F[67],v=I.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Tags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:I.map(e=>(0,t.jsx)("button",{onClick:()=>{W(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${Q.includes(e)?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e},e))})]}),F[24]=q,F[25]=H,F[26]=X,F[27]=ee,F[28]=R,F[29]=Q,F[30]=e,F[31]=s,F[32]=w,F[33]=T,F[34]=P,F[35]=M,F[36]=_,F[37]=a,F[38]=i,F[39]=r,F[40]=g,F[41]=y,F[42]=v,F[43]=N,F[44]=A}else e=F[30],s=F[31],w=F[32],T=F[33],P=F[34],M=F[35],_=F[36],a=F[37],i=F[38],r=F[39],g=F[40],y=F[41],v=F[42],N=F[43],A=F[44];F[68]!==q||F[69]!==H||F[70]!==R||F[71]!==Q?(I=("all"!==q||H>0||Q.length>0||R)&&(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>{O("all"),K(0),W([]),G("")},className:"w-full",children:"Clear All Filters"}),F[68]=q,F[69]=H,F[70]=R,F[71]=Q,F[72]=I):I=F[72],F[73]!==e||F[74]!==a||F[75]!==i||F[76]!==r||F[77]!==g||F[78]!==y||F[79]!==v||F[80]!==I?(L=(0,t.jsxs)(e,{className:a,children:[i,r,g,y,v,I]}),F[73]=e,F[74]=a,F[75]=i,F[76]=r,F[77]=g,F[78]=y,F[79]=v,F[80]=I,F[81]=L):L=F[81],F[82]!==s||F[83]!==N||F[84]!==L?(E=(0,t.jsx)(s,{className:N,children:L}),F[82]=s,F[83]=N,F[84]=L,F[85]=E):E=F[85],F[86]!==A||F[87]!==E?(k=(0,t.jsx)("div",{className:A,children:E}),F[86]=A,F[87]=E,F[88]=k):k=F[88],C="lg:col-span-3";let ea="grid"===J?"default":"outline";F[89]===Symbol.for("react.memo_cache_sentinel")?(B=()=>V("grid"),F[89]=B):B=F[89],F[90]!==ea?(z=(0,t.jsx)(l.Button,{variant:ea,size:"sm",onClick:B,children:"Grid"}),F[90]=ea,F[91]=z):z=F[91];let ei="list"===J?"default":"outline";F[92]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>V("list"),F[92]=Y):Y=F[92],F[93]!==ei?(Z=(0,t.jsx)(l.Button,{variant:ei,size:"sm",onClick:Y,children:"List"}),F[93]=ei,F[94]=Z):Z=F[94],F[95]!==z||F[96]!==Z?(et=(0,t.jsxs)("div",{className:"flex gap-2",children:[z,Z]}),F[95]=z,F[96]=Z,F[97]=et):et=F[97],D=(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[es.length," ",1===es.length?"route":"routes"," found"]}),et]}),F[98]!==ee?(U=!ee&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading routes..."})]}),F[98]=ee,F[99]=U):U=F[99],$=0===es.length&&ee&&(0,t.jsx)(n.Card,{children:(0,t.jsxs)(n.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(c.Search,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No routes found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters or search query"})]})}),S=es.length>0&&(0,t.jsx)("div",{className:"grid"===J?"grid grid-cols-1 md:grid-cols-2 gap-4":"space-y-4",children:es.map(e=>(0,t.jsx)(n.Card,{className:"hover-lift cursor-pointer",onClick:()=>X.push(`/routes/discover/${e._id}`),children:(0,t.jsxs)(n.CardContent,{className:"p-4",children:[(0,t.jsx)("div",{className:"w-full h-32 bg-gradient-to-br from-purple-100 to-blue-100 rounded-lg mb-3 flex items-center justify-center",children:(0,t.jsx)(m.MapPin,{className:"w-8 h-8 text-purple-600"})}),(0,t.jsx)("h3",{className:"font-semibold text-lg mb-2",children:e.title}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.tags.slice(0,3).map(j),e.tags.length>3&&(0,t.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.tags.length-3]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(u.TrendingUp,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-medium",children:(0,f.formatDistance)(e.distance)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.Star,{className:"w-4 h-4 text-yellow-500"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.rating,"/5"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 pt-3 border-t",children:[(0,t.jsxs)("span",{children:["by ",e.creator.name]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(p.Users,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:[e.completionCount||0," completed"]})]})]})]})},e._id))}),F[6]=q,F[7]=H,F[8]=X,F[9]=ee,F[10]=R,F[11]=Q,F[12]=J,F[13]=S,F[14]=w,F[15]=k,F[16]=T,F[17]=P,F[18]=M,F[19]=_,F[20]=C,F[21]=D,F[22]=U,F[23]=$}else S=F[13],w=F[14],k=F[15],T=F[16],P=F[17],M=F[18],_=F[19],C=F[20],D=F[21],U=F[22],$=F[23];return F[100]!==S||F[101]!==C||F[102]!==D||F[103]!==U||F[104]!==$?(A=(0,t.jsxs)("div",{className:C,children:[D,U,$,S]}),F[100]=S,F[101]=C,F[102]=D,F[103]=U,F[104]=$,F[105]=A):A=F[105],F[106]!==w||F[107]!==k||F[108]!==A?(I=(0,t.jsxs)("div",{className:w,children:[k,A]}),F[106]=w,F[107]=k,F[108]=A,F[109]=I):I=F[109],F[110]!==T||F[111]!==I?(L=(0,t.jsx)("div",{className:T,children:I}),F[110]=T,F[111]=I,F[112]=L):L=F[112],F[113]!==P||F[114]!==L?(E=(0,t.jsx)("div",{className:P,children:L}),F[113]=P,F[114]=L,F[115]=E):E=F[115],F[116]!==M||F[117]!==_||F[118]!==E?(B=(0,t.jsxs)("div",{className:M,children:[_,E]}),F[116]=M,F[117]=_,F[118]=E,F[119]=B):B=F[119],B}function j(e,s){return(0,t.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:e},s)}function b(e){return e.tags}e.s(["default",()=>y])}]);