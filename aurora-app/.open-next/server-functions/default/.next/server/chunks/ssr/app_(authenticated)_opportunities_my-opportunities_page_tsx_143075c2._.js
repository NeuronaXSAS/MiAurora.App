module.exports=[27805,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(11241);var d=a.i(96373),e=a.i(1322),f=a.i(40695),g=a.i(3130),h=a.i(54161),i=a.i(65733),j=a.i(5522),k=a.i(46893),l=a.i(87682),m=a.i(45519),n=a.i(97063);function o({open:a,onOpenChange:g,userId:h,opportunity:o}){let[p,q]=(0,c.useState)(o.category),[r,s]=(0,c.useState)(o.title),[t,u]=(0,c.useState)(o.description),[v,w]=(0,c.useState)(o.company||""),[x,y]=(0,c.useState)(o.location||""),[z,A]=(0,c.useState)(o.creditCost),[B,C]=(0,c.useState)(o.contactEmail||""),[D,E]=(0,c.useState)(o.externalLink||""),[F,G]=(0,c.useState)(o.salary||""),[H,I]=(0,c.useState)(o.requirements?.join("\n")||""),[J,K]=(0,c.useState)([]),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(null);(0,c.useEffect)(()=>{q(o.category),s(o.title),u(o.description),w(o.company||""),y(o.location||""),A(o.creditCost),C(o.contactEmail||""),E(o.externalLink||""),G(o.salary||""),I(o.requirements?.join("\n")||""),K([])},[o]);let P=(0,d.useMutation)(e.api.opportunities.update),Q=async()=>{if(!p)return void O("Please select a category");if(r.length<5||r.length>100)return void O("Title must be 5-100 characters");if(t.length<20||t.length>1e3)return void O("Description must be 20-1000 characters");if(z<5||z>100)return void O("Credit cost must be between 5 and 100");if(B&&!B.includes("@"))return void O("Please enter a valid email address");O(null),M(!0);try{let a=H.split("\n").map(a=>a.trim()).filter(a=>a.length>0);(await P({opportunityId:o._id,userId:h,title:r,description:t,category:p,company:v||void 0,location:x||void 0,creditCost:z,contactEmail:B||void 0,externalLink:D||void 0,salary:F||void 0,requirements:a.length>0?a:void 0,thumbnailStorageId:J.length>0?J[0].storageId:void 0})).success&&g(!1)}catch(a){console.error("Opportunity update error:",a),O(a.message||"Failed to update opportunity")}finally{M(!1)}};return(0,b.jsx)(i.Dialog,{open:a,onOpenChange:g,children:(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Edit Opportunity"}),(0,b.jsx)(i.DialogDescription,{children:"Update your opportunity details"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Category *"}),(0,b.jsxs)(l.Select,{value:p,onValueChange:q,children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Select a category"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"job",children:"Job - Employment opportunities"}),(0,b.jsx)(l.SelectItem,{value:"mentorship",children:"Mentorship - Guidance & coaching"}),(0,b.jsx)(l.SelectItem,{value:"resource",children:"Resource - Tools & materials"}),(0,b.jsx)(l.SelectItem,{value:"event",children:"Event - Workshops & networking"}),(0,b.jsx)(l.SelectItem,{value:"funding",children:"Funding - Grants & investments"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Title * (5-100 characters)"}),(0,b.jsx)(j.Input,{placeholder:"e.g., Senior Software Engineer at TechCorp",value:r,onChange:a=>s(a.target.value),maxLength:100}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[r.length,"/100 characters"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Description * (20-1000 characters)"}),(0,b.jsx)(k.Textarea,{placeholder:"Describe the opportunity in detail...",value:t,onChange:a=>u(a.target.value),rows:5,maxLength:1e3}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[t.length,"/1000 characters"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Company/Organization (Optional)"}),(0,b.jsx)(j.Input,{placeholder:"e.g., TechCorp Inc.",value:v,onChange:a=>w(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Location (Optional)"}),(0,b.jsx)(j.Input,{placeholder:"e.g., San Francisco, CA or Remote",value:x,onChange:a=>y(a.target.value)})]}),"job"===p&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Salary Range (Optional)"}),(0,b.jsx)(j.Input,{placeholder:"e.g., $80,000 - $120,000",value:F,onChange:a=>G(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Credit Cost * (5-100 credits)"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(j.Input,{type:"number",min:5,max:100,value:z,onChange:a=>A(parseInt(a.target.value)||5),className:"w-32"}),(0,b.jsx)("div",{className:"flex-1 bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(n.Info,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-xs text-blue-700",children:"Set how many credits users need to unlock this opportunity. Higher value = more exclusive."})]})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Contact Email (Optional)"}),(0,b.jsx)(j.Input,{type:"email",placeholder:"e.g., hiring@company.com",value:B,onChange:a=>C(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"External Link (Optional)"}),(0,b.jsx)(j.Input,{type:"url",placeholder:"e.g., https://company.com/careers",value:D,onChange:a=>E(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Requirements (Optional)"}),(0,b.jsx)(k.Textarea,{placeholder:"Enter each requirement on a new line e.g., 5+ years experience Bachelor's degree Strong communication skills",value:H,onChange:a=>I(a.target.value),rows:4}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"One requirement per line"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Update Thumbnail Image (Optional)"}),(0,b.jsx)(m.FileUpload,{onFilesChange:K,maxFiles:1}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a new logo or image (leave empty to keep current)"})]}),N&&(0,b.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:N}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>g(!1),disabled:L,children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:Q,disabled:L,children:L?"Updating...":"Update Opportunity"})]})]})]})})}var p=a.i(41961),q=a.i(70106);let r=(0,q.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var s=a.i(81560),t=a.i(77156);let u=(0,q.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var v=a.i(38246);function w(){let[a,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/auth/me"),b=await a.json();b.userId&&i(b.userId)}catch(a){console.error("Error getting user:",a)}})()},[]);let l=(0,d.useQuery)(e.api.opportunities.getByCreator,a?{creatorId:a}:"skip"),m=(0,d.useMutation)(e.api.opportunities.deleteOpportunity),n=(0,d.useMutation)(e.api.opportunities.updateStatus),q=async b=>{if(a&&confirm("Are you sure you want to delete this opportunity?"))try{await m({opportunityId:b,userId:a})}catch(a){console.error("Delete error:",a),alert("Failed to delete opportunity: "+a.message)}},w=async(a,b)=>{try{await n({opportunityId:a,isActive:!b})}catch(a){console.error("Status update error:",a),alert("Failed to update status: "+a.message)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white border-b sticky top-16 lg:top-0 z-10",children:(0,b.jsx)("div",{className:"px-4 sm:px-6 py-4 sm:py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(p.Briefcase,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600 flex-shrink-0 mt-1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"My Opportunities"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Manage your created opportunities"})]})]}),(0,b.jsx)(v.default,{href:"/opportunities",children:(0,b.jsx)(f.Button,{variant:"outline",children:"Back to All Opportunities"})})]})})}),(0,b.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto",children:[void 0===l&&(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-600",children:"Loading..."})}),l&&0===l.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(p.Briefcase,{className:"w-8 h-8 text-purple-600"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No opportunities yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"Create your first opportunity to get started!"}),(0,b.jsx)(v.default,{href:"/opportunities",children:(0,b.jsx)(f.Button,{children:"Create Opportunity"})})]}),l&&l.length>0&&(0,b.jsx)("div",{className:"space-y-4",children:l.map(a=>(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.title}),(0,b.jsx)(h.Badge,{variant:a.isActive?"default":"secondary",children:a.isActive?"Active":"Inactive"})]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[a.company||"Community Member",a.location&&` â€¢ ${a.location}`]}),(0,b.jsx)("p",{className:"text-sm text-gray-700 line-clamp-2",children:a.description})]}),(0,b.jsxs)(h.Badge,{className:"bg-purple-100 text-purple-800",children:[a.creditCost," credits"]})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>w(a._id,a.isActive),children:a.isActive?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Eye,{className:"w-4 h-4 mr-2"}),"Activate"]})}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>k(a),children:[(0,b.jsx)(r,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,b.jsxs)(f.Button,{variant:"destructive",size:"sm",onClick:()=>q(a._id),children:[(0,b.jsx)(s.Trash2,{className:"w-4 h-4 mr-2"}),"Delete"]})]})})]},a._id))})]})}),a&&j&&(0,b.jsx)(o,{open:!!j,onOpenChange:a=>!a&&k(null),userId:a,opportunity:j})]})}a.s(["default",()=>w],27805)}];

//# sourceMappingURL=app_%28authenticated%29_opportunities_my-opportunities_page_tsx_143075c2._.js.map