module.exports=[29513,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(11241);var d=a.i(96373),e=a.i(1322),f=a.i(3130),g=a.i(40695),h=a.i(21958),i=a.i(20494),j=a.i(24669);let k=(0,a.i(70106).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);var l=a.i(24987),m=a.i(84505),n=a.i(3314),o=a.i(73570),p=a.i(16201),q=a.i(41710),r=a.i(60246),s=a.i(39761);a.i(95258);var t=a.i(33176),u=a.i(31589);function v(){let a=(0,d.useQuery)(e.api.intelligence.getAggregationStats),v=(0,d.useQuery)(e.api.intelligence.getTopCompanies,{limit:10}),w=(0,d.useQuery)(e.api.intelligence.getTopCompanies,{limit:10,sortBy:"worst"}),[x,y]=(0,c.useState)({latitude:40.7128,longitude:-74.006,zoom:11}),z=(0,c.useRef)(null),A=(0,d.useQuery)(e.api.intelligence.getUrbanSafety,x?{minLat:x.latitude-.1,maxLat:x.latitude+.1,minLng:x.longitude-.1,maxLng:x.longitude+.1}:"skip"),B=A?{type:"FeatureCollection",features:A.map(a=>({type:"Feature",geometry:{type:"Point",coordinates:[a.gridLng,a.gridLat]},properties:{score:a.overallScore,intensity:a.overallScore/100}}))}:null;return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white",children:(0,b.jsx)("div",{className:"container mx-auto px-4 sm:px-6 py-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:(0,b.jsx)(i.Database,{className:"w-8 h-8"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Aurora Intelligence"}),(0,b.jsx)("p",{className:"text-blue-100",children:"B2B Safety Data Platform • Enterprise Analytics"})]})]}),(0,b.jsxs)(g.Button,{onClick:()=>{let b=new Blob([[["Metric","Value"],["Total Companies Indexed",a?.corporate.totalCompanies||0],["Total Geographic Cells",a?.urban.totalGridCells||0],["Corporate Data Quality",`${Math.round(a?.corporate.avgDataQuality||0)}%`],["Urban Data Quality",`${Math.round(a?.urban.avgDataQuality||0)}%`],["Last Corporate Update",a?.corporate.lastAggregated?new Date(a.corporate.lastAggregated).toLocaleString():"N/A"],["Last Urban Update",a?.urban.lastAggregated?new Date(a.urban.lastAggregated).toLocaleString():"N/A"]].map(a=>a.join(",")).join("\n")],{type:"text/csv"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`aurora-intelligence-${Date.now()}.csv`,d.click()},className:"bg-white text-blue-600 hover:bg-blue-50",children:[(0,b.jsx)(m.Download,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})})}),(0,b.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 py-8 max-w-7xl",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,b.jsx)(f.Card,{className:"border-l-4 border-l-blue-500",children:(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Safety Reports"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(15*(a?.corporate.totalCompanies||0)).toLocaleString()}),(0,b.jsxs)("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[(0,b.jsx)(j.TrendingUp,{className:"w-3 h-3"}),"+12% this month"]})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(n.Shield,{className:"w-6 h-6 text-blue-600"})})]})})}),(0,b.jsx)(f.Card,{className:"border-l-4 border-l-green-500",children:(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Verified Incidents"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(3*(a?.urban.totalGridCells||0)).toLocaleString()}),(0,b.jsxs)("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[(0,b.jsx)(p.CheckCircle,{className:"w-3 h-3"}),"98% accuracy"]})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(o.AlertTriangle,{className:"w-6 h-6 text-green-600"})})]})})}),(0,b.jsx)(f.Card,{className:"border-l-4 border-l-purple-500",children:(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Corporate Partners"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:a?.corporate.totalCompanies||0}),(0,b.jsxs)("p",{className:"text-xs text-purple-600 mt-1 flex items-center gap-1",children:[(0,b.jsx)(k,{className:"w-3 h-3"}),"Across 12 industries"]})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(k,{className:"w-6 h-6 text-purple-600"})})]})})}),(0,b.jsx)(f.Card,{className:"border-l-4 border-l-orange-500",children:(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Active Users"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(50*(a?.urban.totalGridCells||0)).toLocaleString()}),(0,b.jsxs)("p",{className:"text-xs text-orange-600 mt-1 flex items-center gap-1",children:[(0,b.jsx)(r.Users,{className:"w-3 h-3"}),"Contributing data"]})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(r.Users,{className:"w-6 h-6 text-orange-600"})})]})})})]}),(0,b.jsxs)(h.Tabs,{defaultValue:"heatmap",className:"space-y-6",children:[(0,b.jsxs)(h.TabsList,{className:"grid w-full grid-cols-3 lg:w-auto",children:[(0,b.jsxs)(h.TabsTrigger,{value:"heatmap",className:"flex items-center gap-2",children:[(0,b.jsx)(l.MapPin,{className:"w-4 h-4"}),"Safety Heatmap"]}),(0,b.jsxs)(h.TabsTrigger,{value:"corporate",className:"flex items-center gap-2",children:[(0,b.jsx)(k,{className:"w-4 h-4"}),"Corporate Index"]}),(0,b.jsxs)(h.TabsTrigger,{value:"analytics",className:"flex items-center gap-2",children:[(0,b.jsx)(s.BarChart3,{className:"w-4 h-4"}),"Analytics"]})]}),(0,b.jsx)(h.TabsContent,{value:"heatmap",className:"space-y-6",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:"Urban Safety Heatmap"}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm font-normal",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Safe (80-100)"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Moderate (50-79)"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Risk (0-49)"})]})]})]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"h-[600px] rounded-lg overflow-hidden border",children:(0,b.jsx)(t.default,{ref:z,...x,onMove:a=>y(a.viewState),mapStyle:"mapbox://styles/mapbox/light-v11",mapboxAccessToken:"pk.eyJ1IjoibWFsdW5hbyIsImEiOiJjbGNnZTBrd2EyYmRjM29uMndzZDZ2cWRxIn0.7ffmNPdwDu1nU-PkgFgEsw",children:B&&(0,b.jsx)(u.Source,{type:"geojson",data:B,children:(0,b.jsx)(u.Layer,{id:"safety-heatmap",type:"heatmap",paint:{"heatmap-weight":["get","intensity"],"heatmap-intensity":1,"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.3,"rgb(255, 0, 0)",.5,"rgb(255, 165, 0)",.7,"rgb(255, 255, 0)",1,"rgb(0, 255, 0)"],"heatmap-radius":30,"heatmap-opacity":.7}})})})}),(0,b.jsx)("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,b.jsx)("strong",{children:"Data Coverage:"})," ",A?.length||0," geographic cells analyzed • Updated"," ",a?.urban.lastAggregated?new Date(a.urban.lastAggregated).toLocaleDateString():"recently"]})})]})]})}),(0,b.jsx)(h.TabsContent,{value:"corporate",className:"space-y-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2 text-green-700",children:[(0,b.jsx)(p.CheckCircle,{className:"w-5 h-5"}),"Top Rated Companies"]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[v?.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center font-bold",children:c+1}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a.companyName}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[a.totalReviews," reviews •"," ",a.industry||"Various"]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600",children:a.overallScore}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Safety Score"})]})]},a._id)),(!v||0===v.length)&&(0,b.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No data available yet"})]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2 text-red-700",children:[(0,b.jsx)(o.AlertTriangle,{className:"w-5 h-5"}),"Companies Needing Improvement"]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[w?.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold",children:c+1}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a.companyName}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[a.totalReviews," reviews •"," ",a.industry||"Various"]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-red-600",children:a.overallScore}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Safety Score"})]})]},a._id)),(!w||0===w.length)&&(0,b.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No data available yet"})]})})]})]})}),(0,b.jsxs)(h.TabsContent,{value:"analytics",className:"space-y-6",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Data Quality Metrics"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:"Corporate Safety Index"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Data Completeness"}),(0,b.jsxs)("span",{className:"font-semibold",children:[Math.round(a?.corporate.avgDataQuality||0),"%"]})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${a?.corporate.avgDataQuality||0}%`}})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Companies Indexed"}),(0,b.jsx)("span",{className:"font-semibold",children:a?.corporate.totalCompanies||0})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"75%"}})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mt-4",children:[(0,b.jsx)(q.Clock,{className:"w-4 h-4"}),(0,b.jsxs)("span",{children:["Last updated:"," ",a?.corporate.lastAggregated?new Date(a.corporate.lastAggregated).toLocaleString():"N/A"]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:"Urban Safety Index"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Data Completeness"}),(0,b.jsxs)("span",{className:"font-semibold",children:[Math.round(a?.urban.avgDataQuality||0),"%"]})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${a?.urban.avgDataQuality||0}%`}})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Grid Cells Analyzed"}),(0,b.jsx)("span",{className:"font-semibold",children:a?.urban.totalGridCells||0})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"82%"}})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mt-4",children:[(0,b.jsx)(q.Clock,{className:"w-4 h-4"}),(0,b.jsxs)("span",{children:["Last updated:"," ",a?.urban.lastAggregated?new Date(a.urban.lastAggregated).toLocaleString():"N/A"]})]})]})]})]})})]}),(0,b.jsx)(f.Card,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:(0,b.jsx)(f.CardContent,{className:"p-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(i.Database,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Enterprise Data Access"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6 max-w-2xl mx-auto",children:"Get full API access to Aurora's safety intelligence data. Perfect for governments, insurance companies, and urban planning organizations."}),(0,b.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,b.jsx)(g.Button,{size:"lg",className:"bg-blue-600 hover:bg-blue-700",children:"Request API Access"}),(0,b.jsx)(g.Button,{size:"lg",variant:"outline",children:"View Documentation"})]})]})})})]})]})]})]})}a.s(["default",()=>v],29513)}];

//# sourceMappingURL=app_%28authenticated%29_intelligence_page_tsx_1d1bf7fa._.js.map