module.exports=[97227,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(11241);var d=a.i(96373),e=a.i(1322),f=a.i(40695),g=a.i(3130),h=a.i(51130),i=a.i(25015),j=a.i(24669),k=a.i(93518),l=a.i(47213),m=a.i(69012),n=a.i(84505),o=a.i(50944),p=a.i(53940),q=a.i(94632);let r=(0,a.i(70106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var s=a.i(50522);function t({routes:a}){let d,e=(0,o.useRouter)(),[i,j]=(0,c.useState)(new Date),k=(0,c.useRef)(null),l=new Date(i.getFullYear(),i.getMonth(),1),m=new Date(i.getFullYear(),i.getMonth()+1,0),q=l.getDay(),t=m.getDate(),u=()=>{j(new Date(i.getFullYear(),i.getMonth()-1,1))},v=()=>{j(new Date(i.getFullYear(),i.getMonth()+1,1))};d=function(a){let{onSwipeLeft:b,onSwipeRight:d,onSwipeUp:e,onSwipeDown:f,threshold:g=50}=a,h=(0,c.useRef)(0),i=(0,c.useRef)(0),j=(0,c.useRef)(0),k=(0,c.useRef)(0);return{onTouchStart:a=>{h.current=a.touches[0].clientX,i.current=a.touches[0].clientY},onTouchMove:a=>{j.current=a.touches[0].clientX,k.current=a.touches[0].clientY},onTouchEnd:()=>{let a=j.current-h.current,c=k.current-i.current,l=Math.abs(a),m=Math.abs(c);l>m&&l>g?a>0?d?.():b?.():m>l&&m>g&&(c>0?f?.():e?.())}}}({onSwipeLeft:v,onSwipeRight:u,threshold:50}),(0,c.useEffect)(()=>{let a=k.current;if(a)return a.addEventListener("touchstart",d.onTouchStart),a.addEventListener("touchmove",d.onTouchMove),a.addEventListener("touchend",d.onTouchEnd),()=>{a.removeEventListener("touchstart",d.onTouchStart),a.removeEventListener("touchmove",d.onTouchMove),a.removeEventListener("touchend",d.onTouchEnd)}},[k,d]);let w=a.reduce((a,b)=>{let c=new Date(b._creationTime),d=`${c.getFullYear()}-${c.getMonth()}-${c.getDate()}`;return a[d]||(a[d]=[]),a[d].push(b),a},{}),x=a=>w[`${i.getFullYear()}-${i.getMonth()}-${a}`]||[],y=a.filter(a=>{let b=new Date(a._creationTime);return b.getMonth()===i.getMonth()&&b.getFullYear()===i.getFullYear()}),z=y.reduce((a,b)=>a+b.distance,0),A=y.reduce((a,b)=>a+b.creditsEarned,0),[B,C]=(0,c.useState)(null),D=[];for(let a=0;a<q;a++)D.push(null);for(let a=1;a<=t;a++)D.push(a);let E=["January","February","March","April","May","June","July","August","September","October","November","December"];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(g.Card,{ref:k,children:(0,b.jsxs)(g.CardContent,{className:"p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:u,children:(0,b.jsx)(r,{className:"w-4 h-4"})}),(0,b.jsxs)("h2",{className:"text-xl font-bold",children:[E[i.getMonth()]," ",i.getFullYear()]}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:v,children:(0,b.jsx)(s.ChevronRight,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Routes"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:y.length})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Distance"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(0,p.formatDistance)(z)})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Credits"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:A})]})]}),y.length>0&&(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{let a=new Blob(["Date,Title,Distance (m),Duration (s),Rating,Type,Tags,Credits Earned\n"+y.map(a=>{let b=new Date(a._creationTime),c=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`;return`${c},"${a.title}",${a.distance},${a.duration},${a.rating},${a.routeType},"${a.tags.join("; ")}",${a.creditsEarned}`}).join("\n")],{type:"text/csv"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`aurora-routes-${E[i.getMonth()]}-${i.getFullYear()}.csv`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(b)},className:"w-full",children:[(0,b.jsx)(n.Download,{className:"w-4 h-4 mr-2"}),"Export ",E[i.getMonth()]," Data"]})}),(0,b.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>(0,b.jsx)("div",{className:"text-center text-sm font-semibold text-gray-600 py-2",children:a},a)),D.map((a,c)=>{let d;if(null===a)return(0,b.jsx)("div",{className:"aspect-square"},`empty-${c}`);let e=w[d=`${i.getFullYear()}-${i.getMonth()}-${a}`]&&w[d].length>0,f=B===a,g=a===new Date().getDate()&&i.getMonth()===new Date().getMonth()&&i.getFullYear()===new Date().getFullYear();return(0,b.jsx)("button",{onClick:()=>C(f?null:a),className:`
                    aspect-square rounded-lg border-2 transition-all
                    ${f?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-purple-300"}
                    ${g?"bg-blue-50":""}
                    ${e?"font-bold":""}
                  `,children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,b.jsx)("span",{className:`text-sm ${g?"text-blue-600":""}`,children:a}),e&&(0,b.jsx)("div",{className:"flex gap-0.5 mt-1",children:x(a).slice(0,3).map((a,c)=>(0,b.jsx)("div",{className:"w-1.5 h-1.5 bg-purple-600 rounded-full"},c))})]})},a)})]})]})}),B&&x(B).length>0&&(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Routes on ",E[i.getMonth()]," ",B,", ",i.getFullYear()]}),(0,b.jsx)("div",{className:"space-y-3",children:x(B).map(a=>(0,b.jsx)("div",{className:"p-4 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>e.push(`/routes/${a._id}`),children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-semibold mb-2",children:a.title}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:a.tags.slice(0,3).map((a,c)=>(0,b.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:a},c))}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs",children:"Distance"}),(0,b.jsx)("p",{className:"font-semibold",children:(0,p.formatDistance)(a.distance)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs",children:"Duration"}),(0,b.jsx)("p",{className:"font-semibold",children:(0,p.formatDuration)(a.duration)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs",children:"Rating"}),(0,b.jsx)("p",{className:"font-semibold",children:"⭐".repeat(a.rating)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs",children:"Type"}),(0,b.jsx)("p",{className:"font-semibold capitalize",children:a.routeType})]})]})]}),a.creditsEarned>0&&(0,b.jsx)("div",{className:"flex items-center gap-1 bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-sm",children:(0,b.jsxs)("span",{className:"font-semibold",children:["+",a.creditsEarned]})})]})},a._id))})]})}),B&&0===x(B).length&&(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(h.Route,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-600",children:"No routes on this day"})]})})]})}function u(){let[a,r]=(0,c.useState)(null),[s,u]=(0,c.useState)("list"),[v,w]=(0,c.useState)("all"),[x,y]=(0,c.useState)(null),z=(0,o.useRouter)();(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/auth/me"),b=await a.json();b.userId&&r(b.userId)}catch(a){console.error("Error getting user:",a)}})()},[]);let A=(0,d.useQuery)(e.api.routes.getUserRoutes,a?{userId:a,limit:20}:"skip"),B=A?.filter(a=>("all"===v||a.routeType===v)&&(!x||!!a.tags.includes(x)))||[],C=B.reduce((a,b)=>a+b.distance,0),D=B.length,E=B.reduce((a,b)=>a+b.creditsEarned,0),F=Array.from(new Set(A?.flatMap(a=>a.tags)||[]));return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.Route,{className:"w-8 h-8"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Aurora Routes"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-purple-100",children:"Track, share, and discover safe routes"})]})]}),(0,b.jsxs)(f.Button,{size:"lg",className:"bg-white text-purple-600 hover:bg-purple-50 w-full sm:w-auto hidden sm:flex",onClick:()=>z.push("/routes/track"),children:[(0,b.jsx)(i.Play,{className:"w-5 h-5 mr-2"}),"Start Tracking"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3 sm:gap-4 mt-6",children:[(0,b.jsxs)("div",{className:"bg-white/10 backdrop-blur rounded-lg p-3 sm:p-4",children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm text-purple-100",children:"Total Distance"}),(0,b.jsx)("p",{className:"text-lg sm:text-2xl font-bold",children:(0,p.formatDistance)(C)})]}),(0,b.jsxs)("div",{className:"bg-white/10 backdrop-blur rounded-lg p-3 sm:p-4",children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm text-purple-100",children:"Routes"}),(0,b.jsx)("p",{className:"text-lg sm:text-2xl font-bold",children:D})]}),(0,b.jsxs)("div",{className:"bg-white/10 backdrop-blur rounded-lg p-3 sm:p-4",children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm text-purple-100",children:"Credits Earned"}),(0,b.jsx)("p",{className:"text-lg sm:text-2xl font-bold",children:E})]})]})]})}),(0,b.jsx)("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[(0,b.jsx)(g.Card,{className:"hover-lift cursor-pointer",onClick:()=>z.push("/routes/track"),children:(0,b.jsx)(g.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(i.Play,{className:"w-6 h-6 text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Start New Route"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Track your movement"})]})]})})}),(0,b.jsx)(g.Card,{className:"hover-lift cursor-pointer",onClick:()=>z.push("/routes/discover"),children:(0,b.jsx)(g.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(j.TrendingUp,{className:"w-6 h-6 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Discover Routes"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Find safe paths"})]})]})})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:"My Routes"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"list"===s?"default":"outline",size:"sm",onClick:()=>u("list"),children:"List"}),(0,b.jsxs)(f.Button,{variant:"calendar"===s?"default":"outline",size:"sm",onClick:()=>u("calendar"),children:[(0,b.jsx)(l.Calendar,{className:"w-4 h-4 mr-1"}),"Calendar"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,b.jsx)(f.Button,{variant:"all"===v?"default":"outline",size:"sm",onClick:()=>w("all"),children:"All"}),["walking","running","cycling","commuting"].map(a=>(0,b.jsx)(f.Button,{variant:v===a?"default":"outline",size:"sm",onClick:()=>w(a),className:"capitalize",children:a},a)),F.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-px bg-gray-300 mx-1"}),F.slice(0,5).map(a=>(0,b.jsxs)(f.Button,{variant:x===a?"default":"outline",size:"sm",onClick:()=>y(x===a?null:a),children:[(0,b.jsx)(m.Filter,{className:"w-3 h-3 mr-1"}),a]},a))]})]}),!A&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading your routes..."})]}),0===B.length&&A&&A.length>0&&(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(m.Filter,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No routes match your filters"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters to see more routes"}),(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>{w("all"),y(null)},children:"Clear Filters"})]})}),A&&0===A.length&&(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(h.Route,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No routes yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"Start tracking your first route to see it here!"}),(0,b.jsxs)(f.Button,{onClick:()=>z.push("/routes/track"),children:[(0,b.jsx)(i.Play,{className:"w-4 h-4 mr-2"}),"Start First Route"]})]})}),"calendar"===s&&A&&A.length>0&&(0,b.jsx)(t,{routes:B}),"list"===s&&B.length>0&&(0,b.jsx)("div",{className:"space-y-4",children:B.map(a=>(0,b.jsx)(g.Card,{className:"hover-lift",children:(0,b.jsx)(g.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>z.push(`/routes/${a._id}`),children:[(0,b.jsx)("h3",{className:"font-semibold text-lg mb-2",children:a.title}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:a.tags.slice(0,3).map((a,c)=>(0,b.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full",children:a},c))}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Distance"}),(0,b.jsx)("p",{className:"font-semibold",children:(0,p.formatDistance)(a.distance)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Duration"}),(0,b.jsx)("p",{className:"font-semibold",children:(0,p.formatDuration)(a.duration)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Rating"}),(0,b.jsx)("p",{className:"font-semibold",children:"⭐".repeat(a.rating)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Type"}),(0,b.jsx)("p",{className:"font-semibold capitalize",children:a.routeType})]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:(0,q.formatDistanceToNow)(a._creationTime,{addSuffix:!0})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[a.creditsEarned>0&&(0,b.jsxs)("div",{className:"flex items-center gap-1 bg-purple-100 text-purple-700 px-3 py-1 rounded-full",children:[(0,b.jsx)(k.Award,{className:"w-4 h-4"}),(0,b.jsxs)("span",{className:"text-sm font-semibold",children:["+",a.creditsEarned]})]}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:b=>{let c,d,e;b.stopPropagation(),c=new Blob([`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="Aurora App">
  <metadata>
    <name>${a.title}</name>
    <desc>${a.journalEntry||""}</desc>
  </metadata>
  <trk>
    <name>${a.title}</name>
    <type>${a.routeType}</type>
    <trkseg>
${a.coordinates.map(a=>`      <trkpt lat="${a.lat}" lon="${a.lng}">
        ${a.elevation?`<ele>${a.elevation}</ele>`:""}
        <time>${new Date(a.timestamp).toISOString()}</time>
      </trkpt>`).join("\n")}
    </trkseg>
  </trk>
</gpx>`],{type:"application/gpx+xml"}),d=URL.createObjectURL(c),(e=document.createElement("a")).href=d,e.download=`${a.title.replace(/\s+/g,"_")}.gpx`,document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(d)},children:(0,b.jsx)(n.Download,{className:"w-4 h-4"})})]})]})})},a._id))})]})]})})]})}a.s(["default",()=>u],97227)}];

//# sourceMappingURL=app_%28authenticated%29_routes_page_tsx_2565be8b._.js.map