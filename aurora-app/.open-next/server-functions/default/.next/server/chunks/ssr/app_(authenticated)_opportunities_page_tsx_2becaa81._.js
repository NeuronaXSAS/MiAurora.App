module.exports=[18840,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(11241);var d=a.i(96373),e=a.i(1322),f=a.i(3130),g=a.i(54161),h=a.i(40695),i=a.i(76504),j=a.i(41961),k=a.i(69769),l=a.i(4720),m=a.i(47213),n=a.i(90166),o=a.i(43108),p=a.i(67453),q=a.i(21374),r=a.i(79360),s=a.i(81560);let t={job:j.Briefcase,mentorship:k.GraduationCap,resource:l.FileText,event:m.Calendar,funding:n.DollarSign},u={job:"bg-blue-100 text-blue-800",mentorship:"bg-purple-100 text-purple-800",resource:"bg-green-100 text-green-800",event:"bg-orange-100 text-orange-800",funding:"bg-pink-100 text-pink-800"};function v({opportunity:a,isUnlocked:k,userCredits:l,currentUserId:m,onUnlock:v,onDelete:w}){let x=t[a.category]||j.Briefcase,y=u[a.category]||"bg-gray-100 text-gray-800",z=l>=a.creditCost,[A,B]=(0,c.useState)(null),C=m===a.creatorId,D=(0,d.useMutation)(e.api.opportunities.deleteOpportunity),E=async()=>{if(m&&C&&confirm("Are you sure? Users who unlocked this opportunity will keep access, but you'll stop earning credits from new unlocks."))try{await D({opportunityId:a._id,userId:m}),w?.()}catch(a){console.error("Delete error:",a),alert("Failed to delete opportunity: "+a.message)}};(0,c.useEffect)(()=>{a.thumbnailStorageId&&fetch(`/api/files/url?storageId=${a.thumbnailStorageId}`).then(a=>a.json()).then(a=>B(a.url)).catch(a=>console.error("Error fetching thumbnail:",a))},[a.thumbnailStorageId]);let F=a.company||a.companyName,G=a.salary||a.salaryRange,H=a.externalLink||a.externalUrl;return(0,b.jsxs)(f.Card,{className:`hover-lift animate-fade-in-up ${!k&&!z?"opacity-75":""}`,children:[A&&(0,b.jsx)("div",{className:"w-full h-48 overflow-hidden rounded-t-lg",children:(0,b.jsx)("img",{src:A,alt:a.title,className:"w-full h-full object-cover"})}),(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[!A&&(0,b.jsx)("div",{className:`w-12 h-12 rounded-lg ${y} flex items-center justify-center flex-shrink-0`,children:(0,b.jsx)(x,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg truncate",children:a.title}),F&&(0,b.jsx)("p",{className:"text-sm text-gray-600",children:F}),a.location&&(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.location})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Badge,{className:y,children:a.category.charAt(0).toUpperCase()+a.category.slice(1)}),C&&(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(h.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(r.MoreVertical,{className:"w-4 h-4"})})}),(0,b.jsx)(i.DropdownMenuContent,{align:"end",children:(0,b.jsxs)(i.DropdownMenuItem,{onClick:E,className:"text-red-600 focus:text-red-600",children:[(0,b.jsx)(s.Trash2,{className:"w-4 h-4 mr-2"}),"Delete Opportunity"]})})]})]})]})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsx)("p",{className:`text-gray-700 ${!k?"line-clamp-2":""}`,children:a.description}),k&&(0,b.jsxs)("div",{className:"space-y-2 pt-2 border-t",children:[G&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(n.DollarSign,{className:"w-4 h-4 text-gray-500"}),(0,b.jsx)("span",{className:"font-medium",children:"Salary:"}),(0,b.jsx)("span",{className:"text-gray-600",children:G})]}),a.requirements&&a.requirements.length>0&&(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:"Requirements:"}),(0,b.jsx)("ul",{className:"list-disc list-inside text-gray-600 mt-1 space-y-1",children:a.requirements.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]}),a.safetyRating&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(q.Star,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),(0,b.jsx)("span",{className:"font-medium",children:"Safety Rating:"}),(0,b.jsxs)("span",{className:"text-gray-600",children:[a.safetyRating,"/5"]})]}),a.contactEmail&&(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:"Contact:"})," ",(0,b.jsx)("a",{href:`mailto:${a.contactEmail}`,className:"text-purple-600 hover:text-purple-700 underline",children:a.contactEmail})]}),H&&(0,b.jsx)("a",{href:H,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-purple-600 hover:text-purple-700 underline inline-block",children:"View full details →"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:k?(0,b.jsxs)(g.Badge,{variant:"outline",className:"text-green-600 border-green-600",children:[(0,b.jsx)(p.CheckCircle2,{className:"w-3 h-3 mr-1"}),"Unlocked"]}):(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(o.Lock,{className:"w-4 h-4 text-gray-500"}),(0,b.jsxs)("span",{className:"font-medium",children:[a.creditCost," credits"]})]})}),!k&&(0,b.jsx)(h.Button,{onClick:v,disabled:!z,size:"sm",children:z?`Unlock (${a.creditCost} credits)`:"Insufficient Credits"})]}),!k&&!z&&(0,b.jsxs)("div",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded",children:["You need ",a.creditCost-l," more credits to unlock this"]})]})]})}var w=a.i(54690),x=a.i(65733),y=a.i(5522),z=a.i(46893),A=a.i(87682),B=a.i(45519),C=a.i(8406),D=a.i(97063);function E({open:a,onOpenChange:f,userId:g}){let[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(10),[u,v]=(0,c.useState)(""),[w,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)([]),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(null),P=(0,d.useMutation)(e.api.opportunities.create),Q=async()=>{if(!i)return void O("Please select a category");if(k.length<5||k.length>100)return void O("Title must be 5-100 characters");if(m.length<20||m.length>1e3)return void O("Description must be 20-1000 characters");if(s<5||s>100)return void O("Credit cost must be between 5 and 100");if(u&&!u.includes("@"))return void O("Please enter a valid email address");O(null),M(!0);try{let a=H.split("\n").map(a=>a.trim()).filter(a=>a.length>0);(await P({creatorId:g,title:k,description:m,category:i,company:o||void 0,location:q||void 0,creditCost:s,contactEmail:u||void 0,externalLink:w||void 0,salary:F||void 0,requirements:a.length>0?a:void 0,thumbnailStorageId:J.length>0?J[0].storageId:void 0})).success&&(j(""),l(""),n(""),p(""),r(""),t(10),v(""),E(""),G(""),I(""),K([]),f(!1))}catch(a){console.error("Opportunity creation error:",a),O(a.message||"Failed to create opportunity")}finally{M(!1)}};return(0,b.jsx)(x.Dialog,{open:a,onOpenChange:f,children:(0,b.jsxs)(x.DialogContent,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(x.DialogHeader,{children:[(0,b.jsx)(x.DialogTitle,{children:"Create an Opportunity"}),(0,b.jsx)(x.DialogDescription,{children:"Share a job, mentorship, resource, event, or funding opportunity with the community"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Category *"}),(0,b.jsxs)(A.Select,{value:i,onValueChange:j,children:[(0,b.jsx)(A.SelectTrigger,{children:(0,b.jsx)(A.SelectValue,{placeholder:"Select a category"})}),(0,b.jsxs)(A.SelectContent,{children:[(0,b.jsx)(A.SelectItem,{value:"job",children:"Job - Employment opportunities"}),(0,b.jsx)(A.SelectItem,{value:"mentorship",children:"Mentorship - Guidance & coaching"}),(0,b.jsx)(A.SelectItem,{value:"resource",children:"Resource - Tools & materials"}),(0,b.jsx)(A.SelectItem,{value:"event",children:"Event - Workshops & networking"}),(0,b.jsx)(A.SelectItem,{value:"funding",children:"Funding - Grants & investments"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Title * (5-100 characters)"}),(0,b.jsx)(y.Input,{placeholder:"e.g., Senior Software Engineer at TechCorp",value:k,onChange:a=>l(a.target.value),maxLength:100}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[k.length,"/100 characters"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Description * (20-1000 characters)"}),(0,b.jsx)(z.Textarea,{placeholder:"Describe the opportunity in detail...",value:m,onChange:a=>n(a.target.value),rows:5,maxLength:1e3}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[m.length,"/1000 characters"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Company/Organization (Optional)"}),(0,b.jsx)(y.Input,{placeholder:"e.g., TechCorp Inc.",value:o,onChange:a=>p(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Location (Optional)"}),(0,b.jsx)(y.Input,{placeholder:"e.g., San Francisco, CA or Remote",value:q,onChange:a=>r(a.target.value)})]}),"job"===i&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Salary Range (Optional)"}),(0,b.jsx)(y.Input,{placeholder:"e.g., $80,000 - $120,000",value:F,onChange:a=>G(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Credit Cost * (5-100 credits)"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(y.Input,{type:"number",min:5,max:100,value:s,onChange:a=>t(parseInt(a.target.value)||5),className:"w-32"}),(0,b.jsx)("div",{className:"flex-1 bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(D.Info,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-xs text-blue-700",children:"Set how many credits users need to unlock this opportunity. Higher value = more exclusive."})]})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Contact Email (Optional)"}),(0,b.jsx)(y.Input,{type:"email",placeholder:"e.g., hiring@company.com",value:u,onChange:a=>v(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"External Link (Optional)"}),(0,b.jsx)(y.Input,{type:"url",placeholder:"e.g., https://company.com/careers",value:w,onChange:a=>E(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Requirements (Optional)"}),(0,b.jsx)(z.Textarea,{placeholder:"Enter each requirement on a new line e.g., 5+ years experience Bachelor's degree Strong communication skills",value:H,onChange:a=>I(a.target.value),rows:4}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"One requirement per line"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Thumbnail Image (Optional)"}),(0,b.jsx)(B.FileUpload,{onFilesChange:K,maxFiles:1}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a logo or image to make your opportunity stand out"})]}),N&&(0,b.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:N}),(0,b.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(C.Sparkles,{className:"w-5 h-5 text-purple-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm text-purple-900",children:"Share opportunities, build community"}),(0,b.jsx)("p",{className:"text-xs text-purple-700 mt-1",children:"Your opportunity will be visible to all users. They'll unlock it using credits to see full details."})]})]})}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>f(!1),disabled:L,children:"Cancel"}),(0,b.jsx)(h.Button,{onClick:Q,disabled:L,children:L?"Creating...":"Create Opportunity"})]})]})]})})}var F=a.i(15618),G=a.i(21161),H=a.i(38246);function I(){let[a,f]=(0,c.useState)(void 0),[g,i]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/auth/me"),b=await a.json();b.userId&&i(b.userId)}catch(a){console.error("Error getting user:",a)}})()},[]);let m=(0,d.useQuery)(e.api.opportunities.list,{category:a}),n=(0,d.useQuery)(e.api.users.getUser,g?{userId:g}:"skip"),o=(0,d.useQuery)(e.api.opportunities.getUserUnlocks,g?{userId:g}:"skip"),p=(0,d.useMutation)(e.api.opportunities.unlock),q=async a=>{if(g)try{await p({userId:g,opportunityId:a})}catch(a){console.error("Unlock error:",a),alert("Failed to unlock opportunity: "+a.message)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white border-b",children:(0,b.jsxs)("div",{className:"px-4 sm:px-6 py-4 sm:py-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(j.Briefcase,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600 flex-shrink-0 mt-1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Opportunities"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Unlock jobs, mentorship, and resources"})]})]}),n&&(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 bg-purple-50 sm:bg-transparent rounded-lg p-3 sm:p-0",children:[(0,b.jsxs)("div",{className:"flex-1 sm:text-right",children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Your Credits"}),(0,b.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:n.credits})]}),(0,b.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(C.Sparkles,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600"})})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between",children:[(0,b.jsxs)(A.Select,{value:a||"all",onValueChange:a=>f("all"===a?void 0:a),children:[(0,b.jsx)(A.SelectTrigger,{className:"w-full sm:w-[200px]",children:(0,b.jsx)(A.SelectValue,{placeholder:"All Categories"})}),(0,b.jsxs)(A.SelectContent,{children:[(0,b.jsx)(A.SelectItem,{value:"all",children:"All Categories"}),(0,b.jsx)(A.SelectItem,{value:"job",children:"Jobs"}),(0,b.jsx)(A.SelectItem,{value:"mentorship",children:"Mentorship"}),(0,b.jsx)(A.SelectItem,{value:"resource",children:"Resources"}),(0,b.jsx)(A.SelectItem,{value:"event",children:"Events"}),(0,b.jsx)(A.SelectItem,{value:"funding",children:"Funding"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(H.default,{href:"/opportunities/my-opportunities",children:(0,b.jsxs)(h.Button,{variant:"outline",children:[(0,b.jsx)(G.Settings,{className:"w-4 h-4 mr-2"}),"My Opportunities"]})}),(0,b.jsxs)(h.Button,{onClick:()=>l(!0),className:"bg-purple-600 hover:bg-purple-700",children:[(0,b.jsx)(F.Plus,{className:"w-4 h-4 mr-2"}),"Create Opportunity"]})]})]})]})}),(0,b.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto",children:[void 0===m&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[(0,b.jsx)(w.OpportunityCardSkeleton,{}),(0,b.jsx)(w.OpportunityCardSkeleton,{}),(0,b.jsx)(w.OpportunityCardSkeleton,{}),(0,b.jsx)(w.OpportunityCardSkeleton,{})]}),m&&0===m.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(j.Briefcase,{className:"w-8 h-8 text-purple-600"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No opportunities yet"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Check back soon for new opportunities!"})]}),m&&m.length>0&&(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:m.map(a=>{let c;return(0,b.jsx)(v,{opportunity:a,isUnlocked:(c=a._id,o?.some(a=>a._id===c)||!1),userCredits:n?.credits||0,currentUserId:g||void 0,onUnlock:()=>q(a._id)},a._id)})}),n&&n.credits<50&&(0,b.jsx)("div",{className:"mt-8 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(C.Sparkles,{className:"w-6 h-6 text-purple-600 mt-1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Need More Credits?"}),(0,b.jsx)("p",{className:"text-gray-700 mb-4",children:"Earn credits by contributing to the community:"}),(0,b.jsxs)("ul",{className:"space-y-2 text-sm text-gray-600",children:[(0,b.jsxs)("li",{children:["• Create a post: ",(0,b.jsx)("span",{className:"font-semibold text-purple-600",children:"+10 credits"})]}),(0,b.jsxs)("li",{children:["• Verify a post: ",(0,b.jsx)("span",{className:"font-semibold text-purple-600",children:"+5 credits"})]}),(0,b.jsx)("li",{children:"• Help other women navigate safely and earn rewards!"})]})]})]})})]})}),g&&(0,b.jsx)(E,{open:k,onOpenChange:l,userId:g})]})}a.s(["default",()=>I],18840)}];

//# sourceMappingURL=app_%28authenticated%29_opportunities_page_tsx_2becaa81._.js.map