module.exports=[15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},64791,a=>{"use strict";let b=(0,a.i(70106).default)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);a.s(["Video",()=>b],64791)},45519,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(11241);var d=a.i(96373),e=a.i(1322),f=a.i(40695),g=a.i(33508),h=a.i(73320);let i=(0,a.i(70106).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var j=a.i(64791);function k({onFilesChange:a,maxFiles:k=5}){let[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),r=(0,c.useRef)(null),s=(0,d.useMutation)(e.api.files.generateUploadUrl),t=async b=>{let c=Array.from(b.target.files||[]);if(l.length+c.length>k)return void q(`Maximum ${k} files allowed`);q(null),o(!0);try{let b=[];for(let a of c){let c=a.type.startsWith("image/"),d=a.type.startsWith("video/");if(!c&&!d){q(`${a.name} is not a valid image or video file`);continue}let e=d?0x3200000:0xa00000;if(a.size>e){q(`${a.name} is too large. Max size: ${d?"50MB":"10MB"}`);continue}let f=await s(),g=await fetch(f,{method:"POST",headers:{"Content-Type":a.type},body:a}),{storageId:h}=await g.json(),i=await fetch(`/api/files/url?storageId=${h}`).then(a=>a.json());b.push({storageId:h,url:i.url,type:d?"video":"image",file:a})}let d=[...l,...b];m(d),a(d)}catch(a){console.error("Upload error:",a),q("Failed to upload files. Please try again.")}finally{o(!1),r.current&&(r.current.value="")}};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[(0,b.jsx)("input",{ref:r,type:"file",accept:"image/*,video/*",multiple:!0,onChange:t,disabled:n||l.length>=k,className:"hidden",id:"file-upload"}),(0,b.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:[(0,b.jsx)(h.Upload,{className:"w-8 h-8 text-gray-400"}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:n?(0,b.jsx)("span",{children:"Uploading..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"font-semibold text-primary",children:"Click to upload"})," ","or drag and drop"]})}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"Images (max 10MB) or Videos (max 50MB)"}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[l.length," / ",k," files"]})]})]}),p&&(0,b.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:p}),l.length>0&&(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:l.map((c,d)=>(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:"image"===c.type?(0,b.jsx)("img",{src:URL.createObjectURL(c.file),alt:`Upload ${d+1}`,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(j.Video,{className:"w-12 h-12 text-gray-400"})})}),(0,b.jsx)(f.Button,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{let b;m(b=l.filter((a,b)=>b!==d)),a(b)},children:(0,b.jsx)(g.X,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:["image"===c.type?(0,b.jsx)(i,{className:"w-3 h-3 inline mr-1"}):(0,b.jsx)(j.Video,{className:"w-3 h-3 inline mr-1"}),c.file.name.length>15?c.file.name.substring(0,15)+"...":c.file.name]})]},d))})]})}a.s(["FileUpload",()=>k],45519)},73320,a=>{"use strict";let b=(0,a.i(70106).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);a.s(["Upload",()=>b],73320)},3688,a=>{"use strict";var b=a.i(72131),c=a.i(72752);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},34157,a=>{"use strict";let b=(0,a.i(70106).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},46893,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},62213,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>b])},77192,a=>{"use strict";var b=a.i(72131),c=a.i(70121),d=a.i(72752),e=a=>{var e;let g,h,{present:i,children:j}=a,k=function(a){var c,e;let[g,h]=b.useState(),i=b.useRef(null),j=b.useRef(a),k=b.useRef("none"),[l,m]=(c=a?"mounted":"unmounted",e={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},b.useReducer((a,b)=>e[a][b]??a,c));return b.useEffect(()=>{let a=f(i.current);k.current="mounted"===l?a:"none"},[l]),(0,d.useLayoutEffect)(()=>{let b=i.current,c=j.current;if(c!==a){let d=k.current,e=f(b);a?m("MOUNT"):"none"===e||b?.display==="none"?m("UNMOUNT"):c&&d!==e?m("ANIMATION_OUT"):m("UNMOUNT"),j.current=a}},[a,m]),(0,d.useLayoutEffect)(()=>{if(g){let a,b=g.ownerDocument.defaultView??window,c=c=>{let d=f(i.current).includes(CSS.escape(c.animationName));if(c.target===g&&d&&(m("ANIMATION_END"),!j.current)){let c=g.style.animationFillMode;g.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===g.style.animationFillMode&&(g.style.animationFillMode=c)})}},d=a=>{a.target===g&&(k.current=f(i.current))};return g.addEventListener("animationstart",d),g.addEventListener("animationcancel",c),g.addEventListener("animationend",c),()=>{b.clearTimeout(a),g.removeEventListener("animationstart",d),g.removeEventListener("animationcancel",c),g.removeEventListener("animationend",c)}}m("ANIMATION_END")},[g,m]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(a=>{i.current=a?getComputedStyle(a):null,h(a)},[])}}(i),l="function"==typeof j?j({present:k.isPresent}):b.Children.only(j),m=(0,c.useComposedRefs)(k.ref,(e=l,(h=(g=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.ref:(h=(g=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.props.ref:e.props.ref||e.ref));return"function"==typeof j||k.isPresent?b.cloneElement(l,{ref:m}):null};function f(a){return a?.animationName||"none"}e.displayName="Presence",a.s(["Presence",()=>e])},33508,a=>{"use strict";var b=a.i(62213);a.s(["X",()=>b.default])},21142,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(11241);var d=a.i(96373),e=a.i(1322),f=a.i(65733),g=a.i(40695),h=a.i(5522),i=a.i(46893),j=a.i(87682),k=a.i(45519),l=a.i(21374),m=a.i(24987),n=a.i(8406);function o({open:a,onOpenChange:o,userId:p,prefilledLocation:q}){let[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(0),[z,A]=(0,c.useState)(q||""),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(!1);(0,c.useEffect)(()=>{q&&A(q)},[q]);let N=(0,d.useMutation)(e.api.posts.create),O=(0,d.useMutation)(e.api.posts.addMedia),P=async a=>{if(!a.trim())return null;try{let b=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(a)}.json?access_token=pk.eyJ1IjoibWFsdW5hbyIsImEiOiJjbGNnZTBrd2EyYmRjM29uMndzZDZ2cWRxIn0.7ffmNPdwDu1nU-PkgFgEsw&limit=1`);if(!b.ok)return console.error("Geocoding failed:",b.statusText),null;let c=await b.json();if(c.features&&c.features.length>0){let[a,b]=c.features[0].center;return[a,b]}return null}catch(a){return console.error("Geocoding error:",a),null}},Q=async()=>{if(!r)return void K("Please select a life dimension");if(t.length<10||t.length>200)return void K("Title must be 10-200 characters");if(v.length<20||v.length>2e3)return void K("Description must be 20-2000 characters");if(0===x)return void K("Please select a rating");K(null),I(!0);try{let a;if(z.trim()){M(!0);let b=await P(z);if(M(!1),b)a=b,C(b);else{K("Could not find location. Please check the address and try again."),I(!1);return}}let b=await N({authorId:p,lifeDimension:r,title:t,description:v,rating:x,location:z.trim()&&a?{name:z,coordinates:a}:void 0,isAnonymous:D});b.success&&b.postId&&(F.length>0&&await O({postId:b.postId,media:F.map(a=>({type:a.type,storageId:a.storageId,url:a.url}))}),s(""),u(""),w(""),y(0),A(""),C(null),E(!1),G([]),o(!1))}catch(a){console.error("Post creation error:",a),K(a.message||"Failed to create post")}finally{I(!1)}};return(0,b.jsx)(f.Dialog,{open:a,onOpenChange:o,children:(0,b.jsxs)(f.DialogContent,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(f.DialogHeader,{children:[(0,b.jsx)(f.DialogTitle,{children:"Create a Post"}),(0,b.jsx)(f.DialogDescription,{children:"Share your experience and earn 10 credits"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Life Dimension *"}),(0,b.jsxs)(j.Select,{value:r,onValueChange:s,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select a dimension"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"professional",children:"Professional - Workplaces & Careers"}),(0,b.jsx)(j.SelectItem,{value:"social",children:"Social - Clubs, Bars & Events"}),(0,b.jsx)(j.SelectItem,{value:"daily",children:"Daily Life - Gyms, Shops & Services"}),(0,b.jsx)(j.SelectItem,{value:"travel",children:"Travel - Cities & Destinations"}),(0,b.jsx)(j.SelectItem,{value:"financial",children:"Financial - Banking & Investments"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Title * (10-200 characters)"}),(0,b.jsx)(h.Input,{placeholder:"e.g., Great workplace with supportive culture",value:t,onChange:a=>u(a.target.value),maxLength:200}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[t.length,"/200 characters"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Description * (20-2000 characters)"}),(0,b.jsx)(i.Textarea,{placeholder:"Share your detailed experience...",value:v,onChange:a=>w(a.target.value),rows:5,maxLength:2e3}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[v.length,"/2000 characters"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Safety/Comfort Rating *"}),(0,b.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>y(a),className:"focus:outline-none",children:(0,b.jsx)(l.Star,{className:`w-8 h-8 transition-colors ${a<=x?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-200"}`})},a))}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[0===x&&"Click to rate",1===x&&"Very Unsafe",2===x&&"Somewhat Unsafe",3===x&&"Neutral",4===x&&"Safe",5===x&&"Very Safe"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[(0,b.jsx)(m.MapPin,{className:"w-4 h-4"}),"Location (Optional)"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Input,{placeholder:"e.g., 123 Main St, San Francisco, CA",value:z,onChange:a=>{A(a.target.value),C(null)},className:"flex-1"}),(0,b.jsx)(g.Button,{type:"button",variant:"outline",size:"icon",onClick:async()=>{navigator.geolocation?(M(!0),navigator.geolocation.getCurrentPosition(async a=>{let{latitude:b,longitude:c}=a.coords;C([c,b]);try{let a=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${c},${b}.json?access_token=pk.eyJ1IjoibWFsdW5hbyIsImEiOiJjbGNnZTBrd2EyYmRjM29uMndzZDZ2cWRxIn0.7ffmNPdwDu1nU-PkgFgEsw&limit=1`),d=await a.json();d.features&&d.features.length>0&&A(d.features[0].place_name)}catch(a){console.error("Reverse geocoding error:",a)}M(!1)},a=>{console.error("Geolocation error:",a),K("Could not get your location. Please enter it manually."),M(!1)})):K("Geolocation is not supported by your browser")},disabled:L,title:"Use my current location",children:(0,b.jsx)(m.MapPin,{className:"w-4 h-4"})})]}),L&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Finding location on map..."}),B&&(0,b.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"âœ“ Location found and will be marked on map"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Photos & Videos (Optional)"}),(0,b.jsx)(k.FileUpload,{onFilesChange:G,maxFiles:5})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"anonymous",checked:D,onChange:a=>E(a.target.checked),className:"rounded"}),(0,b.jsx)("label",{htmlFor:"anonymous",className:"text-sm",children:"Post anonymously"})]}),J&&(0,b.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:J}),(0,b.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(n.Sparkles,{className:"w-5 h-5 text-purple-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm text-purple-900",children:"Earn 10 credits for posting!"}),(0,b.jsx)("p",{className:"text-xs text-purple-700 mt-1",children:"Help other women and unlock opportunities"})]})]})}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>o(!1),disabled:H,children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:Q,disabled:H||L,children:L?"Finding location...":H?"Creating...":"Create Post"})]})]})]})})}a.s(["PostCreateDialog",()=>o])}];

//# sourceMappingURL=_2e1a1f94._.js.map