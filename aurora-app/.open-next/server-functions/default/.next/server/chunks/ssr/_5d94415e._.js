module.exports=[87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},22804,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(11241);var d=a.i(96373),e=a.i(1322),f=a.i(3130),g=a.i(40695),h=a.i(5522),i=a.i(7706),j=a.i(54161),k=a.i(63588),l=a.i(87532),m=a.i(15618),n=a.i(50944),o=a.i(94632);function p(){let[a,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(!1),u=(0,n.useRouter)();(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/auth/me"),b=await a.json();b.userId&&p(b.userId)}catch(a){console.error("Error getting user:",a)}})()},[]);let v=(0,d.useQuery)(e.api.directMessages.getConversations,a?{userId:a}:"skip"),w=(0,d.useQuery)(e.api.directMessages.searchUsers,a&&q.length>=2?{query:q,currentUserId:a}:"skip");return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white border-b",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 py-4 sm:py-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(k.MessageSquare,{className:"w-6 h-6 text-purple-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Messages"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Connect with the community"})]})]}),(0,b.jsxs)(g.Button,{onClick:()=>t(!s),className:"bg-purple-600 hover:bg-purple-700",children:[(0,b.jsx)(m.Plus,{className:"w-4 h-4 mr-2"}),"New Message"]})]}),s&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,b.jsx)(h.Input,{placeholder:"Search users to message...",value:q,onChange:a=>r(a.target.value),className:"pl-9"})]}),w&&w.length>0&&(0,b.jsx)(f.Card,{className:"mt-2",children:(0,b.jsx)(f.CardContent,{className:"p-2",children:w.map(a=>(0,b.jsxs)("button",{onClick:()=>{u.push(`/messages/${a._id}`),t(!1),r("")},className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,b.jsxs)(i.Avatar,{children:[(0,b.jsx)(i.AvatarImage,{src:a.profileImage}),(0,b.jsx)(i.AvatarFallback,{children:a.name.charAt(0).toUpperCase()})]}),(0,b.jsxs)("div",{className:"flex-1 text-left",children:[(0,b.jsx)("p",{className:"font-semibold",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.location||"Aurora Community"})]}),(0,b.jsxs)(j.Badge,{variant:"secondary",children:["Trust: ",a.trustScore]})]},a._id))})})]})]})}),(0,b.jsx)("div",{className:"container mx-auto px-4 sm:px-6 py-6",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[!v&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading conversations..."})]}),v&&0===v.length&&(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(k.MessageSquare,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No messages yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"Start a conversation with someone from the community"}),(0,b.jsxs)(g.Button,{onClick:()=>t(!0),children:[(0,b.jsx)(m.Plus,{className:"w-4 h-4 mr-2"}),"Start Messaging"]})]})}),v&&v.length>0&&(0,b.jsx)("div",{className:"space-y-2",children:v.map(a=>(0,b.jsx)(f.Card,{className:"hover-lift cursor-pointer",onClick:()=>u.push(`/messages/${a.partnerId}`),children:(0,b.jsx)(f.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsxs)(i.Avatar,{className:"w-12 h-12",children:[(0,b.jsx)(i.AvatarImage,{src:a.partner?.profileImage}),(0,b.jsx)(i.AvatarFallback,{children:a.partner?.name?.charAt(0).toUpperCase()||"U"})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsx)("p",{className:"font-semibold truncate",children:a.partner?.name||"Unknown User"}),(0,b.jsx)("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:(0,o.formatDistanceToNow)(a.lastMessage.timestamp,{addSuffix:!0})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600 truncate",children:[a.lastMessage.isFromMe&&"You: ",a.lastMessage.content]}),a.unreadCount>0&&(0,b.jsx)(j.Badge,{className:"bg-purple-600 ml-2 flex-shrink-0",children:a.unreadCount})]})]})]})})},a.partnerId))})]})})]})}a.s(["default",()=>p])}];

//# sourceMappingURL=_5d94415e._.js.map